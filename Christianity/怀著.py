# -*- coding:utf-8 -*-
import re
import requests
import time
import os
import io
import sys
# #改变标准输出的默认编码
sys.stdout=io.TextIOWrapper(sys.stdout.buffer,encoding='utf-8')

header = {
        'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/98.0.4758.80 Safari/537.36 Edg/98.0.1108.43'}


def get_list1():
    big_html = '<a href="/plus/view.php?aid=184 " title="《怀爱伦全传》第1卷">   《怀爱伦全传 1BIO     </a><a href="/plus/view.php?aid=185 " title="《怀爱伦全传》第2卷">   《怀爱伦全传 2BIO     </a><a href="/plus/view.php?aid=186 " title="《怀爱伦全传》第3卷">   《怀爱伦全传 3BIO     </a><a href="/plus/view.php?aid=187 " title="《怀爱伦全传》第4卷">   《怀爱伦全传 4BIO     </a><a href="/plus/view.php?aid=188 " title="《怀爱伦全传》第5卷">   《怀爱伦全传 5BIO     </a><a href="/plus/view.php?aid=189 " title="《怀爱伦全传》第6卷">   《怀爱伦全传 6BIO     </a><a href="/plus/view.php?aid=182 " title="传道良助1892">   传道良助189 GW92     </a><a href="/a/lidaidouzheng/20200209/8.html " title="先祖与先知">   先祖与先知 PP     </a><a href="/a/lidaidouzheng/20200210/9.html " title="先知与君王">   先知与君王 PK     </a><a href="/a/lidaidouzheng/20200211/5.html " title="历代愿望">   历代愿望 DA     </a><a href="/a/lidaidouzheng/20200210/6.html " title="使徒行述">   使徒行述 AA     </a><a href="/a/lidaidouzheng/20200212/7.html " title="善恶之争">   善恶之争 GC     </a><a href="/a/jiaohuizhengyan/20201127/11.html " title="喜乐的泉源">   喜乐的泉源 SC     </a><a href="/a/ertongjiaoyu/20200804/45.html " title="服务真诠">   服务真诠 MH     </a><a href="/a/ertongjiaoyu/20200803/89.html " title="安息日学工作勉言">   安息日学工作 CSW     </a><a href="/plus/view.php?aid=180 " title="安息日学工作证言">   安息日学工作 TSS     </a><a href="/a/shulingshenghuo/20210330/159.html " title="《笔记活页》第一卷NEW">   《笔记活页》 1NL     </a><a href="/a/shulingshenghuo/20210331/160.html " title="《笔记活页》第二卷NEW">   《笔记活页》 2NL     </a><a href="/a/shulingshenghuo/20210403/157.html " title="巴特尔克里克信函NEW">   巴特尔克里克 BCL     </a><a href="/a/ertongjiaoyu/20200805/90.html " title="布道论">   布道论 Ev     </a><a href="/a/shulingshenghuo/20210330/158.html " title="保尔森选集">   保尔森选集 PC     </a><a href="/a/meirilingxiu/20200413/55.html " title="彼得对父母们的劝勉">   彼得对父母们 PCP     </a><a href="/a/jiaohuizhengyan/20201130/100.html " title="超凡脱俗">   超凡脱俗 CSA     </a><a href="/a/shulingshenghuo/20210328/172.html " title="《晨星》文章">   《晨星》文章 DS     </a><a href="/a/jiaohuizhengyan/20201202/25.html " title="从心出发">   从心出发 FH     </a><a href="/a/ertongjiaoyu/20200804/92.html " title="传道良助">   传道良助 GW     </a><a href="/a/ertongjiaoyu/20200808/91.html " title="城市布道">   城市布道 MTC     </a><a href="/a/jiaohuizhengyan/20201213/24.html " title="崇高的恩召">   崇高的恩召 OHC     </a><a href="/a/jiaohuizhengyan/20201128/101.html " title="成圣的人生">   成圣的人生 SL     </a><a href="/a/meirilingxiu/20200414/56.html " title="对母亲们的呼吁">   对母亲们的呼 ApM     </a><a href="/a/jiaohuizhengyan/20201203/26.html " title="得胜的基督">   得胜的基督 CTr     </a><a href="/a/meirilingxiu/20200411/57.html " title="儿童教育指南">   儿童教育指南 CG     </a><a href="/a/meirilingxiu/20200411/66.html " title="复临信徒家庭">   复临信徒家庭 AH     </a><a href="/a/jiaohuizhengyan/20201203/27.html " title="奋斗与勇敢">   奋斗与勇敢 CC     </a><a href="/a/lidaidouzheng/20200214/119.html " title="福山宝训">   福山宝训 MB     </a><a href="/a/hunyinjiating/20201002/93.html " title="给教会的勉言">   给教会的勉言 CCh     </a><a href="/a/hunyinjiating/20201004/68.html " title="给管家的勉言">   给管家的勉言 CS     </a><a href="/a/meirilingxiu/20200415/58.html " title="给家长、老师和学生的忠告">   给家长、老师 CT     </a><a href="/a/hunyinjiating/20201005/115.html " title="给作家和编辑的勉言">   给作家和编辑 CW     </a><a href="/a/jiaohuizhengyan/20201204/28.html " title="高举主耶稣">   高举主耶稣 LHU     </a><a href="/a/meirilingxiu/20200415/69.html " title="给恋爱青年的信">   给恋爱青年的 LYL     </a><a href="/a/meirilingxiu/20200412/67.html " title="告青年书">   告青年书 MYP     </a><a href="/a/hunyinjiating/20201003/94.html " title="给牧师和传道人的证言">   给牧师和传道 TM     </a><a href="/a/hunyinjiating/20201005/71.html " title="给南部非洲的证言">   给南部非洲的 TSA     </a><a href="/a/lidaidouzheng/20200512/175.html " title="怀爱伦圣经注释">   怀爱伦圣经注 BCL     </a><a href="/a/shulingshenghuo/20210331/161.html " title="怀爱伦澳洲行">   怀爱伦澳洲行 EA     </a><a href="/a/quanrenjiankang/20200616/111.html " title="怀爱伦自传">   怀爱伦自传 LS     </a><a href="/a/hunyinjiating/20201006/72.html " title="《教会证言》卷一">   《教会证言》 1T     </a><a href="/a/hunyinjiating/20201007/73.html " title="《教会证言》卷二">   《教会证言》 2T     </a><a href="/a/hunyinjiating/20201008/74.html " title="《教会证言》卷三">   《教会证言》 3T     </a><a href="/a/hunyinjiating/20201008/75.html " title="《教会证言》卷四">   《教会证言》 4T     </a><a href="/a/hunyinjiating/20201009/76.html " title="《教会证言》卷五">   《教会证言》 5T     </a><a href="/a/hunyinjiating/20201009/79.html " title="《教会证言》卷六">   《教会证言》 6T     </a><a href="/a/hunyinjiating/20201010/80.html " title="《教会证言》卷七">   《教会证言》 7T     </a><a href="/a/hunyinjiating/20201011/77.html " title="《教会证言》卷八">   《教会证言》 8T     </a><a href="/a/hunyinjiating/20201011/78.html " title="《教会证言》卷九">   《教会证言》 9T     </a><a href="/a/meirilingxiu/20200408/59.html " title="基督化的教育">   基督化的教育 CE     </a><a href="/a/quanrenjiankang/20200606/113.html " title="基督徒经验与教训">   基督徒经验与 CET     </a><a href="/a/ertongjiaoyu/20200811/47.html " title="健康勉言">   健康勉言 CH     </a><a href="/a/hunyinjiating/20201001/96.html " title="基督徒服务大全">   基督徒服务大 ChS     </a><a href="/a/quanrenjiankang/20200611/102.html " title="基督在祂的圣所中">   基督在祂的圣 CIHS     </a><a href="/a/hunyinjiating/20201001/95.html " title="基督化的领导">   基督化的领导 CL     </a><a href="/a/lidaidouzheng/20200213/120.html " title="基督比喻实训">   基督比喻实训 COL     </a><a href="/a/ertongjiaoyu/20200814/112.html " title="基督复临安息日会国外布道史略">   基督复临安息 COL     </a><a href="/a/ertongjiaoyu/20200808/46.html " title="基督徒节制和圣经卫生">   基督徒节制和 CTBH     </a><a href="/a/meirilingxiu/20200408/61.html " title="教育论">   教育论 Ed     </a><a href="/a/lidaidouzheng/20200212/10.html " title="救赎的故事">   救赎的故事 ExV53     </a><a href="/a/meirilingxiu/20200409/60.html " title="基督教育原理">   基督教育原理 FE     </a><a href="/a/ertongjiaoyu/20200810/48.html " title="健康生活">   健康生活 HL     </a><a href="/a/jiaohuizhengyan/20201204/29.html " title="今日的生活">   今日的生活 ML     </a><a href="/a/quanrenjiankang/20200610/121.html " title="救赎论">   救赎论 RED     </a><a href="/a/meirilingxiu/20200409/62.html " title="教育特别证言">   教育特别证言 SpTEd     </a><a href="/a/jiaohuizhengyan/20201205/30.html " title="今日偕主行">   今日偕主行 TDG     </a><a href="/a/jiaohuizhengyan/20201214/31.html " title="举目向上看">   举目向上看 UL     </a><a href="/a/shulingshenghuo/20210401/162.html " title="克雷斯选集">   克雷斯选集 KC     </a><a href="/a/jiaohuizhengyan/20201206/32.html " title="开朗的宗教">   开朗的宗教 RR     </a><a href="/a/shulingshenghuo/20200214/171.html " title="怀爱伦圣经注释">   怀爱伦圣经注 7ABC     </a><a href="/a/ertongjiaoyu/20200812/51.html " title="论饮食">   论饮食 CD     </a><a href="/a/jiaohuizhengyan/20201214/12.html " title="黎明前的黑暗">   黎明前的黑暗 DD     </a><a href="/a/ertongjiaoyu/20200813/49.html " title="论健康食品">   论健康食品 HFM     </a><a href="/a/shulingshenghuo/20210402/163.html " title="洛马林达信息">   洛马林达信息 LLM     </a><a href="/a/hunyinjiating/20200930/98.html " title="论教牧工作">   论教牧工作 PaM     </a><a href="/a/ertongjiaoyu/20200806/116.html " title="论出版工作">   论出版工作 PM     </a><a href="/a/quanrenjiankang/20200612/103.html " title="论祈祷">   论祈祷 Pr     </a><a href="/a/hunyinjiating/20201006/81.html " title="论南方工作">   论南方工作 SWk     </a><a href="/a/quanrenjiankang/20200613/122.html " title="论天使">   论天使 TA     </a><a href="/a/ertongjiaoyu/20200809/50.html " title="论节制">   论节制 Te     </a><a href="/a/meirilingxiu/20200416/70.html " title="论性行为、通奸和离婚的证言">   论性行为、通 TSB     </a><a href="/a/jiaohuizhengyan/20201206/33.html " title="黎明的灵修">   黎明的灵修 WGD     </a><a href="/a/hunyinjiating/20201004/97.html " title="论慈善工作">   论慈善工作 WM     </a><a href="/a/meirilingxiu/20200412/63.html " title="母亲写给孩子的信">   母亲写给孩子 AY     </a><a href="/a/quanrenjiankang/20200609/181.html " title="末世大事记">   末世大事记 LDE     </a><a href="/a/jiaohuizhengyan/20201207/34.html " title="你必得能力">   你必得能力 YRP     </a><a href="/a/shulingshenghuo/20210326/168.html " title="《评论与通讯》文章">   《评论与通讯 RH     </a><a href="/a/jiaohuizhengyan/20201207/35.html " title="奇妙的神恩">   奇妙的神恩 AG     </a><a href="/plus/view.php?aid=177 " title="其他期刊">   其他期刊 OP     </a><a href="/a/shulingshenghuo/20210326/169.html " title="《青年导报》文章">   《青年导报》 YI     </a><a href="/plus/view.php?aid=179 " title="日常生活的帮助">   日常生活的帮 HDL     </a><a href="/a/lidaidouzheng/20200218/15.html " title="《属灵的恩赐》卷一">   《属灵的恩赐 1SG     </a><a href="/a/lidaidouzheng/20200219/16.html " title="《属灵的恩赐》卷二">   《属灵的恩赐 2SG     </a><a href="/a/lidaidouzheng/20200219/17.html " title="《属灵的恩赐》卷三">   《属灵的恩赐 3SG     </a><a href="/a/lidaidouzheng/20200220/18.html " title="《属灵的恩赐》卷四A">   《属灵的恩赐 4aSG     </a><a href="/a/lidaidouzheng/20200220/19.html " title="《属灵的恩赐》卷四B">   《属灵的恩赐 4bSG     </a><a href="/a/jiaohuizhengyan/20201201/104.html " title="上帝的女儿">   上帝的女儿 DG     </a><a href="/a/jiaohuizhengyan/20201202/105.html " title="上帝已应许">   上帝已应许 GHP     </a><a href="/plus/view.php?aid=183 " title="上帝的余民教会">   上帝的余民教 GRC     </a><a href="/a/lidaidouzheng/20200215/14.html " title="使徒保罗传">   使徒保罗传 LP     </a><a href="/a/ertongjiaoyu/20200807/117.html " title="书报员手册">   书报员手册 MC     </a><a href="/a/jiaohuizhengyan/20201208/36.html " title="上帝的儿女">   上帝的儿女 SD     </a><a href="/a/shulingshenghuo/20210402/164.html " title="斯波尔丁和马根选集">   斯波尔丁和马 SPM     </a><a href="/a/jiaohuizhengyan/20201209/37.html " title="使我认识祂">   使我认识祂 TMK     </a><a href="/a/quanrenjiankang/20200613/124.html " title="天国">   天国 HVN     </a><a href="/a/jiaohuizhengyan/20201209/38.html " title="天父关怀你">   天父关怀你 OFC     </a><a href="/a/hunyinjiating/20201013/152.html " title="《特别证言》系列A">   《特别证言》 STPA     </a><a href="/a/hunyinjiating/20201014/153.html " title="《特别证言》系列B">   《特别证言》 STPB     </a><a href="/a/shulingshenghuo/20210404/173.html " title="《文字布道士》文章">   《文字布道士 CEv     </a><a href="/a/ertongjiaoyu/20200807/118.html " title="文字布道论">   文字布道论 CM     </a><a href="/a/jiaohuizhengyan/20201210/39.html " title="我们回天家">   我们回天家 HB     </a><a href="/a/quanrenjiankang/20200614/106.html " title="晚年时光">   晚年时光 RY     </a><a href="/a/ertongjiaoyu/20200814/165.html " title="我们健康信息的故事">   我们健康信息 SHM-apx     </a><a href="/a/chuandaoxuanjiao/20210125/125.html " title="《文稿发布》卷1（19-96）">   《文稿发布》 1MR     </a><a href="/a/chuandaoxuanjiao/20210126/126.html " title="《文稿发布》卷2（97-161）">   《文稿发布》 2MR     </a><a href="/a/chuandaoxuanjiao/20210126/127.html " title="《文稿发布》卷3（162-209）">   《文稿发布》 3MR     </a><a href="/a/chuandaoxuanjiao/20210127/128.html " title="《文稿发布》卷4（210-259）">   《文稿发布》 4MR     </a><a href="/a/chuandaoxuanjiao/20210127/129.html " title="《文稿发布》卷5（260-346）">   《文稿发布》 5MR     </a><a href="/a/chuandaoxuanjiao/20210128/130.html " title="《文稿发布》卷6（347-418）">   《文稿发布》 6MR     </a><a href="/a/chuandaoxuanjiao/20210128/131.html " title="《文稿发布》卷7（419-525）">   《文稿发布》 7MR     </a><a href="/a/chuandaoxuanjiao/20210129/132.html " title="《文稿发布》卷8 (526-663)">   《文稿发布》 8MR     </a><a href="/a/chuandaoxuanjiao/20210130/133.html " title="《文稿发布》卷9 (664-770)">   《文稿发布》 9MR     </a><a href="/a/chuandaoxuanjiao/20210130/134.html " title="《文稿发布》卷10 （771-850）">   《文稿发布》 10MR     </a><a href="/a/chuandaoxuanjiao/20210131/135.html " title="《文稿发布》卷11 (851-920)">   《文稿发布》 11MR     </a><a href="/a/chuandaoxuanjiao/20210131/136.html " title="《文稿发布》卷12 (921-999)">   《文稿发布》 12MR     </a><a href="/a/chuandaoxuanjiao/20210201/137.html " title="《文稿发布》卷13 (1000-1080)">   《文稿发布》 13MR     </a><a href="/a/chuandaoxuanjiao/20210202/138.html " title="《文稿发布》卷14 (1081-1135)">   《文稿发布》 14MR     </a><a href="/a/chuandaoxuanjiao/20210202/139.html " title="《文稿发布》卷15 （136-1185）">   《文稿发布》 15MR     </a><a href="/a/chuandaoxuanjiao/20210203/140.html " title="《文稿发布》卷16 (1186-1235)">   《文稿发布》 16MR     </a><a href="/a/chuandaoxuanjiao/20210203/141.html " title="《文稿发布》卷17 (1236-1300)">   《文稿发布》 17MR     </a><a href="/a/chuandaoxuanjiao/20210204/142.html " title="《文稿发布》卷18（1301-1359）">   《文稿发布》 18MR     </a><a href="/a/chuandaoxuanjiao/20210204/143.html " title="《文稿发布》卷19 (1360-1419)">   《文稿发布》 19MR     </a><a href="/a/chuandaoxuanjiao/20210205/144.html " title="《文稿发布》卷20 (1420-1500)">   《文稿发布》 20MR     </a><a href="/a/chuandaoxuanjiao/20210206/145.html " title="《文稿发布》卷21 (1501-1598)">   《文稿发布》 21MR     </a><a href="/a/chuandaoxuanjiao/20210209/151.html " title="《文稿发布》第1033号《萨拉曼卡异象和1890年日记》">   《文稿发布》 MR1033     </a><a href="/a/chuandaoxuanjiao/20210206/146.html " title="《文稿发布》第311号《余民教会；它的组织、权威、团结和胜利》">   《文稿发布》 MR311     </a><a href="/a/chuandaoxuanjiao/20210207/147.html " title="《文稿发布》第728号《历代愿望的撰写过程》">   《文稿发布》 MR728     </a><a href="/a/chuandaoxuanjiao/20210207/148.html " title="《文稿发布》第760号《圣所真理的完整性》">   《文稿发布》 MR760     </a><a href="/a/chuandaoxuanjiao/20210208/149.html " title="《文稿发布》第852号《复临信徒关于洁净与不洁净肉食观念的发展》">   《文稿发布》 MR852     </a><a href="/a/chuandaoxuanjiao/20210403/150.html " title="《文稿发布》第926号《范妮·博尔顿的故事》">   《文稿发布》 MR926     </a><a href="/a/quanrenjiankang/20200607/82.html " title="《信息选粹》卷一">   《信息选粹》 1SM     </a><a href="/a/quanrenjiankang/20200607/83.html " title="《信息选粹》卷二">   《信息选粹》 2SM     </a><a href="/a/quanrenjiankang/20200608/84.html " title="《信息选粹》卷三">   《信息选粹》 3SM     </a><a href="/a/jiaohuizhengyan/20201210/40.html " title="效法主耶稣">   效法主耶稣 BLJ     </a><a href="/a/quanrenjiankang/20200610/107.html " title="乡村生活">   乡村生活 CL     </a><a href="/plus/view.php?aid=41 " title="信仰的基础">   信仰的基础 FLB     </a><a href="/a/quanrenjiankang/20200612/109.html " title="信心与行为">   信心与行为 FW     </a><a href="/a/shulingshenghuo/20210329/174.html " title="信函">   信函 Lt     </a><a href="/a/meirilingxiu/20200410/64.html " title="心理、品格与个性">   心理、品格与 MCP1-2     </a><a href="/a/jiaohuizhengyan/20201129/108.html " title="新生">   新生 NL     </a><a href="/a/shulingshenghuo/20210324/154.html " title="小册子汇编">   小册子汇编 PH     </a><a href="/a/shulingshenghuo/20210327/170.html " title="《现代真理》文章">   《现代真理》 PT     </a><a href="/a/lidaidouzheng/20200216/20.html " title="《预言之灵》卷一">   《预言之灵》 1SP     </a><a href="/a/lidaidouzheng/20200216/21.html " title="《预言之灵》卷二">   《预言之灵》 2SP     </a><a href="/a/lidaidouzheng/20200217/22.html " title="《预言之灵》卷三">   《预言之灵》 3SP     </a><a href="/a/lidaidouzheng/20200217/23.html " title="《预言之灵》卷四">   《预言之灵》 4SP     </a><a href="/a/ertongjiaoyu/20200810/52.html " title="医疗布道和健康教育的呼召">   医疗布道和健 CME     </a><a href="/a/jiaohuizhengyan/20201212/42.html " title="一同在天上">   一同在天上 HP     </a><a href="/a/ertongjiaoyu/20200812/53.html " title="医疗布道论">   医疗布道论 MM     </a><a href="/a/shulingshenghuo/20210404/166.html " title="一个叫奥克伍德的地方">   一个叫奥克伍 PCO     </a><a href="/a/meirilingxiu/20200414/65.html " title="严肃的呼吁">   严肃的呼吁 SA     </a><a href="/a/ertongjiaoyu/20200811/54.html " title="饮食证言">   饮食证言 TSDF     </a><a href="/a/quanrenjiankang/20200615/99.html " title="演讲与歌唱">   演讲与歌唱 VSS     </a><a href="/a/hunyinjiating/20201012/85.html " title="《证言精选》卷一">   《证言精选》 1TT     </a><a href="/a/hunyinjiating/20201012/86.html " title="《证言精选》卷二">   《证言精选》 2TT     </a><a href="/a/hunyinjiating/20201013/87.html " title="《证言精选》卷三">   《证言精选》 3TT     </a><a href="/plus/view.php?aid=178 " title="早期单张">   早期单张 BROADSIDE     </a><a href="/a/lidaidouzheng/20200213/13.html " title="争锋">   争锋 Con     </a><a href="/a/quanrenjiankang/20200605/114.html " title="早期著作">   早期著作 EW     </a><a href="/a/jiaohuizhengyan/20201213/44.html " title="主必快来">   主必快来 Mar     </a><a href="/a/jiaohuizhengyan/20201212/43.html " title="彰显主基督">   彰显主基督 RC     </a><a href="/a/hunyinjiating/20201002/110.html " title="真复兴教会最大的需要">   真复兴教会最 TR     </a><a href="/a/quanrenjiankang/20200610/88.html " title="致小群人的信息">   致小群人的信 WLF     </a><a href="/a/quanrenjiankang/20200614/167.html " title="1888资料集">   1888资料集 1888     </a><a href="/a/quanrenjiankang/20200616/155.html " title="《证道与演讲》卷一">   《证道与演讲 1SAT     </a><a href="/a/quanrenjiankang/20200617/156.html " title="《证道和演讲》卷二">   《证道和演讲 2SAT     </a>'

    big_url = []
    ex = r'<a href="(.*?)"'
    big_url += re.findall(ex, big_html, re.S)
    for i in range(0, len(big_url)):
        big_url[i] = 'http://egw.fuyinchina.com' + big_url[i]

    big_title = []
    ex1 = 'title="(.*?)"'
    big_title += re.findall(ex1, big_html, re.S)

    # 把名称和链接合并到一个list
    list_1 = []
    for i in range(0, len(big_title)):
        list_1.append([big_title[i], big_url[i][0:-1]])

    return list_1


def download(alist): # alist: title, url
    # 获取这本书的目录和链接
    html = requests.get(alist[1])
    html.encoding = html.apparent_encoding
    html = html.text
    info = []
    ex = r'<div class="logcon">\r\n    <a href=(.*?) </a>\r\n           </div>'
    info += re.findall(ex, html, re.S) # "/go.php?c=emp&a=etext&id=301&chap=1">关于作者 (About the Author)

    # 下载
    os.mkdir('D:/怀著/' + alist[0])
    for i in info:
        # 进一步提取标题和链接
        t = i.split('>')
        t[0] = t[0][1:-1]
        t[0] = 'http://egw.fuyinchina.com' + t[0]
        # print(t) t为一篇文章的名称和链接

        # 获取文本
        data = requests.get(t[0], timeout=20)
        data.encoding = data.apparent_encoding
        data = data.text
        base_text = re.findall('<span id="(.*?)">(.*?)</span>', data, re.S)
        # print(base_text)
        result = ""
        for num in range(0, len(base_text)-1, 2):
            result += base_text[num][1]
        result = result.replace('&emsp;', '\n')

        # 保存
        intab = r'[?*|>“？""”<]'
        filename = 'D:/怀著/' + alist[0] + '/' + t[1] + '.txt'
        filename = re.sub(intab, "", filename)  # 用正则表达式去除windows下的 特殊字符，这些字符不能用在文件名
        try:
            with open(filename, 'w', encoding='utf-8') as fp:
                fp.write(result)
            # print("-------------" + alist[0] + ' ' + alist[1] + ' ' + t[1] + ' ' + t[0] + ' ' + "-------------")
        except:
            print("+++++++++++++" + alist[0] + ' ' + alist[1]  + ' '+ t[1] + ' ' + t[0] + ' ' + "+++++++++++++")
        else:
            pass
        # exit()


if __name__ == '__main__':
    list1 = get_list1() # 获取主页的所有书籍名称和链接
    for i in range(77, len(list1)):
        download(list1[i])
        print("------------------------------------ " + list1[i][0] + " ---- OK -------------------------------------------")
        # exit(0)

